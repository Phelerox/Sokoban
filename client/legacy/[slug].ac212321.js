import{H as t,I as e,b as r,a as i,c as n,d as s,e as a,J as o,K as u,L as h,M as l,i as c,s as f,S as v,f as g,g as y,h as d,j as p,l as k,k as m,m as b,N as w,o as x,p as A,O as I,P as E,Q as U,R as O,T as S,t as C,n as B,U as T,V as P,r as L,w as j,x as M,y as z}from"./chunk.cb34c8bf.js";import{c as G,b as F,a as D,_ as V}from"./chunk.c0ace05a.js";import N from"./hotkeys.esm.c43b16a3.js";function q(e){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(r){t(e,r,i[r])})}return e}function R(t){return--t*t*t*t*t+1}var $=(G||window).BigInt||Number,_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;r(this,t),this.constructor.isInitialized||this.constructor.initialize();var i=this.constructor.isBigInt,n=Array.isArray(e)?this.constructor.encode(e):e;this.value=i?$(n):n}return e(t,[{key:"get",value:function(t){var e=this.constructor,r=e.offsets,i=e.masks,n=this.value>>r[t]&i[t];return Number(n)}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.one,r=this.constructor,i=r.offsets,n=r.masks;return r.isBigInt&&(e=$(e)),this.value=this.value&~(n[t]<<i[t])|e<<i[t],this}},{key:"has",value:function(){for(var t=this.constructor,e=t.offsets,r=t.zero,i=t.one,n=r,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];for(var u=0;u<a.length;u++)n|=i<<e[a[u]];return n|=this.value,this.value===n}},{key:"match",value:function(t){return this.constructor.match(this.value,Array.isArray(t)?t:this.constructor.getMatcher(t))}},{key:"toObject",value:function(){return this.constructor.decode(this.value)}},{key:"toString",value:function(){return this.value.toString()}},{key:"valueOf",value:function(){var t=this.constructor,e=t.isBigInt,r=t.isSafe;return e&&r?Number(this.value):this.value}},{key:Symbol.iterator,value:D.mark(function t(){var e,r;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.constructor.fields,r=0;case 2:if(!(r<e.length)){t.next=8;break}return t.next=5,this.get(e[r].name);case 5:r++,t.next=2;break;case 8:case"end":return t.stop()}},t,this)})}],[{key:"encode",value:function(t){for(var e=this.zero,r=this.fields,i=this.isBigInt,n=e,s=t.length-1;s>=0;s--){var a=t[s];n<<=r[s].size,n|=i?$(a):a}return n}},{key:"decode",value:function(t){for(var e=this.fields,r=this.masks,i={},n=t,s=0;s<e.length;s++){var a=e[s],o=a.name,u=a.size;i[o]=Number(n&r[o]),n>>=u}return i}},{key:"isValid",value:function(t){for(var e=this.masks,r=this.fields,i=Array.isArray(t)?r.map(function(e,r){return[e.name,t[r]]}):Object.entries(t),n=0;n<i.length;n++){var s=F(i[n],2),a=s[0],o=s[1];if((2147483647&o)!==o||o>e[a])return!1}return!0}},{key:"getMinSize",value:function(t){if(t<281474976710656)return 1+(0|Math.log2(t));for(var e=$(t),r=[$(0),$(1),$(2)],i=r[0],n=r[1],s=r[2],a=$(53),o=$(48);a-o>n;){var u=(a+o)/s;((n<<a)-(n<<u)&e)>i?o=u:a=u}return Number(o+n)}},{key:"initialize",value:function(){for(var t=this.fields.reduce(function(t,e){return t+(e.size||1)},0),e=t>31,r=e?[$(0),$(1),$(2)]:[0,1,2],i=F(r,3),n=i[0],s=i[1],a=i[2],o=[],u={},h={},l=n,c=0;c<this.fields.length;c++){var f=this.fields[c],v=f.name||f,g=e?$(f.size||1):f.size||1;u[v]=(a<<g-s)-s,h[v]=l,l+=g,o.push({name:v,size:g})}this.fields=o,this.size=t,this.mask=a<<(e?$(t):t)-s,this.isBigInt=e,this.isSafe=t<=53,this.zero=n,this.one=s,this.two=a,this.masks=u,this.offsets=h,this.isInitialized=!0}},{key:"getMatcher",value:function(t){for(var e=this.masks,r=this.offsets,i=this.zero,n=this.isBigInt,s=Object.keys(t),a=i,o=i,u=0;u<s.length;u++){var h=s[u],l=e[h]<<r[h];o=o&~l|(n?$(t[h]):t[h])<<r[h],a|=l}return[o,this.mask^a]}},{key:"match",value:function(t,e){return(t&e[1])===e[0]}}]),t}();_.fields=Array.from({length:31},function(t,e){return e}),_.size=31,_.zero=0,_.one=1,_.two=2,_.masks=void 0,_.mask=2147483648,_.offsets=void 0,_.isBigInt=!1,_.isSafe=!1,_.isInitialized=!1;var K=_,W=function(t){function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,u);for(var i=e.columns,o=void 0===i?16:i,h=e.rows,l=void 0===h?1:h,c=u.getOffset(o),f=arguments.length,v=new Array(f>1?f-1:0),g=1;g<f;g++)v[g-1]=arguments[g];if(v.length){var y;t=n(this,(y=s(u)).call.apply(y,[this].concat(v)))}else{var d=l<<c>>4;t=n(this,s(u).call(this,d||1))}return Object.defineProperties(a(t),{offset:{value:c},columns:{value:o},rows:{value:l},lastPosition:{value:Object.seal({bucket:0,position:0})}}),n(t)}return i(u,t),e(u,[{key:"get",value:function(t,e){var r=this.getBitPosition(t,e),i=r.bucket,n=r.position;return this[i]>>n&1}},{key:"set",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t.length)return o(s(u.prototype),"set",this).call(this,t,e),this;var i=this.getBitPosition(t,e),n=i.bucket,a=i.position;return this[n]=this[n]&~(1<<a)|r<<a,this}},{key:"getBitPosition",value:function(t,e){var r=(t<<this.offset)+e,i=r>>4;return this.lastPosition.bucket=i,this.lastPosition.position=r-(i<<4),this.lastPosition}}],[{key:"getLength",value:function(t,e){return t<<this.getOffset(e)>>4}},{key:"getOffset",value:function(t){return Math.ceil(Math.log2(t))}},{key:Symbol.species,get:function(){return Uint16Array}}]),u}(u(Uint16Array)),H=function(t){function a(){var t,e;r(this,a);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return(e=n(this,(t=s(a)).call.apply(t,[this].concat(o)))).heapify(),e}return i(a,t),e(a,[{key:"heapify",value:function(){for(var t=this.length>>1;t>=0;t--)this.siftDown(t);return this}},{key:"isHeap",value:function(){return this.constructor.isHeap(this)}},{key:"left",value:function(t){return this[this.constructor.getLeftIndex(t)]}},{key:"parent",value:function(t){return this[this.constructor.getParentIndex(t)]}},{key:"push",value:function(){for(var t=0;t<arguments.length;t++)o(s(a.prototype),"push",this).call(this,t<0||arguments.length<=t?void 0:arguments[t]),this.siftUp(this.length-1);return this.length}},{key:"replace",value:function(t){var e=this[0];return this[0]=t,this.siftDown(0),e}},{key:"right",value:function(t){return this[this.constructor.getRightIndex(t)]}},{key:"shift",value:function(){if(this.length<2)return this.pop();var t=this[0];return this[0]=this.pop(),this.siftDown(0),t}},{key:"splice",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var n=(t=o(s(a.prototype),"splice",this)).call.apply(t,[this].concat(r));if(n.length<2&&r.length<4){var u=r[0];if(3===r.length)this.update(u);else{var h=this.pop();o(s(a.prototype),"splice",this).call(this,u,0,h),this.siftDown(u)}}else this.heapify();return n}},{key:"unshift",value:function(){return this.push.apply(this,arguments)}},{key:"update",value:function(t){var e=this.constructor,r=e.compare,i=e.getLeftIndex,n=this.parent(t),s=i(t);this.has(s)&&(void 0===n||r(n,this[t]))?this.siftDown(t):this.siftUp(t)}},{key:"has",value:function(t){return t>=0&&t<this.length}},{key:"siftDown",value:function(t){for(var e,r=this.constructor,i=r.getRightIndex,n=r.getLeftIndex,s=r.compare,a=t,o=n(a),u=i(a);this.has(o)&&(e=this.has(u)&&s(this[u],this[o])?u:o,!s(this[a],this[e]));){var h=[this[e],this[a]];this[a]=h[0],this[e]=h[1],o=n(a=e),u=i(a)}}},{key:"siftUp",value:function(t){for(var e=this.constructor,r=e.getParentIndex,i=e.compare,n=t,s=r(n);this.has(s)&&!i(this[s],this[n]);){var a=[this[s],this[n]];this[n]=a[0],this[s]=a[1],s=r(n=s)}}}],[{key:"compare",value:function(t,e){return t<e}},{key:"from",value:function(t,e,r){return o(s(a),"from",this).call(this,t,e,r).heapify()}},{key:"getLeftIndex",value:function(t){return 1+(t<<1)}},{key:"getParentIndex",value:function(t){return t-1>>1}},{key:"getRightIndex",value:function(t){return 2+(t<<1)}},{key:"isHeap",value:function(t){for(var e=t.length-1;e>-1;e--){var r=this.getParentIndex(e);if(r<0)break;if(!this.compare(t[r],t[e]))return!1}return!0}},{key:"of",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=o(s(a),"of",this)).call.apply(t,[this].concat(r)).heapify()}},{key:Symbol.species,get:function(){return Array}}]),a}(u(Array)),J=function(t){function a(){return r(this,a),n(this,s(a).apply(this,arguments))}return i(a,H),e(a,null,[{key:"compare",value:function(t,e){return t.w<e.w}}]),a}();var Q=function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=function(o){function u(t){var e,i;r(this,u);for(var o=arguments.length,h=new Array(o>1?o-1:0),l=1;l<o;l++)h[l-1]=arguments[l];i=n(this,(e=s(u)).call.apply(e,[this,t].concat(h)));var c=new W({rows:2,columns:t.vertices});return Object.defineProperties(a(i),{colors:{value:c}}),i}return i(u,t),e(u,[{key:"isGray",value:function(t){return!!this.colors.get(0,t)}},{key:"setGray",value:function(t){return this.colors.set(0,t),this}},{key:"isBlack",value:function(t){return!!this.colors.get(1,t)}},{key:"setBlack",value:function(t){return this.colors.set(1,t),this}},{key:"resetColors",value:function(){return this.colors.fill(0),this}},{key:"traverse",value:D.mark(function t(e){var r,i,n,s,a,o,u,h,l,c,f,v,g,y,d,p=arguments;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=p.length>1&&void 0!==p[1]?p[1]:0,i=!(p.length>2&&void 0!==p[2])||p[2],n=p.length>3?p[3]:void 0,s=p.length>4?p[4]:void 0,this.resetColors(),a=[r],o=F(e?["push","pop"]:["push","shift"],2),u=o[0],h=o[1];case 7:if(!a.length){t.next=47;break}if(l=a[h](),this.setGray(l),!i){t.next=13;break}return t.next=13,l;case 13:c=!0,f=!1,v=void 0,t.prev=16,g=this.outEdges(l)[Symbol.iterator]();case 18:if(c=(y=g.next()).done){t.next=27;break}if(d=y.value,this.isGray(d)||a[u](d),!n){t.next=24;break}return t.next=24,d;case 24:c=!0,t.next=18;break;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(16),f=!0,v=t.t0;case 33:t.prev=33,t.prev=34,c||null==g.return||g.return();case 36:if(t.prev=36,!f){t.next=39;break}throw v;case 39:return t.finish(36);case 40:return t.finish(33);case 41:if(this.setBlack(l),!s){t.next=45;break}return t.next=45,l;case 45:t.next=7;break;case 47:case"end":return t.stop()}},t,this,[[16,29,33,41],[34,,36,40]])})},{key:"isAcyclic",value:function(){var t=!0,e=!1,r=void 0;try{for(var i,n=this.traverse(!0,0,!1,!0)[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var s=i.value;if(this.isGray(s))return!1}}catch(t){e=!0,r=t}finally{try{t||null==n.return||n.return()}finally{if(e)throw r}}return!0}},{key:"topologicalSort",value:function(){return h(this.traverse(!0,0,!1,!1,!0))}},{key:"path",value:function(t,e,r,i){var n=this.constructor.weighted,s=this.vertices,a=new Array(s).fill(-1),o=new Array(s).fill(1/0);if(!(n?r?this.searchTopological(t,e,o,a):i?this.searchDijkstra(t,e,o,a):this.searchBellmanFord(t,e,o,a):this.searchUnweighted(t,e,a)))return[];for(var u=[],h=e;~h;)u.unshift(h),h=a[h];return u}},{key:"searchUnweighted",value:function(t,e,r){var i=t,n=!1,s=!0,a=!1,o=void 0;try{for(var u,h=this.traverse(!1,t,!0,!0)[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var l=u.value;if(this.isGray(l)?i=l:r[l]=i,l===e){n=!0;break}}}catch(t){a=!0,o=t}finally{try{s||null==h.return||h.return()}finally{if(a)throw o}}return n}},{key:"searchTopological",value:function(t,e,r,i){r[t]=0;var n=t,s=!1,a=!0,o=!1,u=void 0;try{for(var h,l=this.traverse(!0,t,!0,!0)[Symbol.iterator]();!(a=(h=l.next()).done);a=!0){var c=h.value;if(this.isGray(c))this.isBlack(c)||(n=c);else{var f=this.getEdge(n,c);r[c]>r[n]+f&&(r[c]=r[n]+f,i[c]=n)}c===e&&(s=!0)}}catch(t){o=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(o)throw u}}return s}},{key:"searchDijkstra",value:function(t,e,r,i){this.resetColors();var n=new J;r[t]=0,n.push({e:t,w:this[t]});for(var s=!1;n.length;){var a=n.shift();if(!this.isGray(a.e)){this.setGray(a.e);var o=!0,u=!1,h=void 0;try{for(var l,c=this.outEdges(a.e)[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,v=this.getEdge(a.e,f),g=r[a.e]+v;g<r[f]&&(r[f]=g,i[f]=a.e,n.push({e:f,w:g})),f===e&&(s=!0)}}catch(t){u=!0,h=t}finally{try{o||null==c.return||c.return()}finally{if(u)throw h}}}}return s}},{key:"searchBellmanFord",value:function(t,e,r,i){var n=this.vertices;r[t]=0;for(var s=!1,a=0;a<n;a++){var o=!0,u=!1,h=void 0;try{for(var l,c=this.outEdges(a)[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,v=this.getEdge(a,f),g=r[a]+v;r[f]>g&&(r[f]=g,i[f]=a,f===e&&(s=!0))}}catch(t){u=!0,h=t}finally{try{o||null==c.return||c.return()}finally{if(u)throw h}}}return s}},{key:"tree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.constructor.weighted,r=this.vertices,i=new Array(r).fill(-1);if(!e)return this.searchUnweighted(t,void 0,i),i;this.resetColors();var n=new Array(r).fill(1/0),s=new J;for(n[t]=0,s.push({e:t,w:this[0]});s.length;){var a=s.shift();if(!this.isGray(a.e)){this.setGray(a.e);var o=!0,u=!1,h=void 0;try{for(var l,c=this.outEdges(a.e)[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var f=l.value,v=this.getEdge(a.e,f);this.isGray(f)||v>n[f]||(n[f]=v,i[f]=a.e,s.push({e:f,w:v}))}}catch(t){u=!0,h=t}finally{try{o||null==c.return||c.return()}finally{if(u)throw h}}}}return i}}]),u}();return u.undirected=o,u};var Y=function(t){return function(u){function h(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,h);for(var i=e.columns,o=void 0===i?2:i,u=e.rows,l=void 0===u?1:u,c=e.pad,f=void 0===c?0:c,v=h.getOffset(o),g=arguments.length,y=new Array(g>1?g-1:0),d=1;d<g;d++)y[d-1]=arguments[d];if(y.length){var p;t=n(this,(p=s(h)).call.apply(p,[this].concat(y)))}else{var k=l<<v;(t=n(this,s(h).call(this,k))).fill(f)}return Object.defineProperties(a(t),{offset:{value:v,writable:!0},pad:{value:f,writable:!0},lastCoordinates:{value:Object.seal({row:0,column:0})}}),n(t)}return i(h,t),e(h,[{key:"getIndex",value:function(t,e){return(t<<this.offset)+e}},{key:"get",value:function(t,e){return this[this.getIndex(t,e)]}},{key:"set",value:function(t,e,r){return t.length&&o(s(h.prototype),"set",this)?(o(s(h.prototype),"set",this).call(this,t,e),this):(this[this.getIndex(t,e)]=r,this)}},{key:"setArray",value:function(t,e){if(o(s(h.prototype),"set",this))o(s(h.prototype),"set",this).call(this,t,e);else{this.length=t.length;for(var r=0;r<t.length;r++)this[r]=t[r]}}},{key:"getCoordinates",value:function(t){return this.lastCoordinates.row=t>>this.offset,this.lastCoordinates.column=t-(this.lastCoordinates.row<<this.offset),this.lastCoordinates}},{key:"toArrays",value:function(t){for(var e=this,r=this.rows,i=this.columns,n=new Uint32Array(r).map(function(t,r){return r<<e.offset}),s=new Array(r),a=0;a<r;a++){var o=n[a];if(t)s[a]=this.slice(o,o+i);else for(var u=o+i-1;u>=o;u--)if(this[u]!==this.pad){s[a]=this.slice(o,u+1);break}}return s}},{key:"columns",set:function(t){this.offset=h.getOffset(t)},get:function(){return 1<<this.offset}},{key:"rows",get:function(){return this.length>>this.offset}}],[{key:"getLength",value:function(t,e){return t<<this.getOffset(e)}},{key:"getOffset",value:function(t){return Math.ceil(Math.log2(t))}},{key:"fromArrays",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.length,i=t[0].length,n=0;n<r;n++)t[n].length>i&&(i=t[n].length);for(var s=new this({rows:r,columns:i=1<<this.getOffset(i),pad:e}),a=0;a<r;a++)for(var o=0;o<t[a].length;o++)s.set(a,o,t[a][o]);return s}},{key:Symbol.species,get:function(){return t}}]),h}()},X=function(t){function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(r(this,o),e.length||e instanceof ArrayBuffer){for(var i,u=arguments.length,h=new Array(u>1?u-1:0),l=1;l<u;l++)h[l-1]=arguments[l];t=n(this,(i=s(o)).call.apply(i,[this,e].concat(h)))}else t=n(this,s(o).call(this,(this instanceof o?this.constructor:void 0).getLength(e)));return Object.defineProperties(a(t),{lastPosition:{value:Object.seal({bucket:0,position:0})}}),n(t)}return i(o,t),e(o,[{key:"getBit",value:function(t){var e=this.getBitPosition(t),r=e.bucket,i=e.position;return this[r]>>i&1}},{key:"setBit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.getBitPosition(t),i=r.bucket,n=r.position;return this[i]=this[i]&~(1<<n)|e<<n,this}},{key:"getBitPosition",value:function(t){var e=t>>5;return this.lastPosition.bucket=e,this.lastPosition.position=t-(e<<5),this.lastPosition}},{key:"size",get:function(){return this.length<<5}}],[{key:"getLength",value:function(t){return Math.ceil(t/32)}},{key:Symbol.species,get:function(){return Uint32Array}}]),o}(u(Uint32Array)),Z={1:0,2:1,4:2,8:3,16:4,32:5,64:6,128:7,256:8,512:9,1024:10,2048:11,4096:12,8192:13,16384:14,32768:15,65536:16,131072:17,262144:18,524288:19,1048576:20,2097152:21,4194304:22,8388608:23,16777216:24,33554432:25,67108864:26,134217728:27,268435456:28,536870912:29,1073741824:30,2147483648:31};var tt={log2:Z,popCount32:function(t){var e=t-(t>>1&1431655765),r=(858993459&e)+(e>>2&858993459);return 16843009*(r+(r>>4)&252645135)>>24},getLSBIndex:function(t){return 2147483648===t?31:Z[t&-t]},getGTEMultiple:function(t,e){return 1+(t-1|e-1)}},et=function(t){function o(t){var e;return r(this,o),(e=n(this,s(o).call(this,t))).fill(4294967295),Object.defineProperties(a(e),{nextAvailable:{value:0,writable:!0}}),e}return i(o,X),e(o,[{key:"get",value:function(){var t=this.nextAvailable;if(!~t)return-1;var e=this[t],r=tt.getLSBIndex(e);if(this[t]&=~(1<<r),0===this[t]){this.nextAvailable=-1;for(var i=0;i<this.length;i++)if(0!==this[i]){this.nextAvailable=i;break}}return(t<<5)+r}},{key:"free",value:function(t){var e=this.getBitPosition(t),r=e.bucket,i=e.position;this[r]|=1<<i,this.nextAvailable=r}}]),o}(),rt=function(t){function a(){return r(this,a),n(this,s(a).apply(this,arguments))}return i(a,X),e(a,[{key:"setBit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o(s(a.prototype),"setBit",this).call(this,t,e);for(var r=e||-1,i=(this.length>>1)+this.lastPosition.bucket;i<this.length;i++)this[i]+=r;return this}},{key:"rank",value:function(t){var e=this.getBitPosition(t),r=e.bucket,i=e.position,n=this[r]&(1<<i)-1,s=tt.popCount32(n);return(r?this[(this.length>>1)+r-1]:0)+s}},{key:"select",value:function(t){for(var e=this.length>>1,r=e,i=this.length-1,n=0;r<=i;)if(t>this[n=i+r>>1])r=n+1;else if(t<this[n])i=n-1;else{if(t!==this[n-1])break;i=n-1}if((n=t===this[n]?n:r)>=this.length)return-1;for(var s=n>e?this[n-1]:0,a=n-e,o=this[a];o;){var u=tt.getLSBIndex(o);if(o&=o-1,++s===t)return(a<<5)+u}}},{key:"size",get:function(){return this.length>>1<<5}}],[{key:"getLength",value:function(t){return Math.ceil(t/32)<<1}}]),a}(),it=String.fromCharCode(0),nt=function(t){function a(){return r(this,a),n(this,s(a).apply(this,arguments))}return i(a,t),e(a,[{key:"characters",value:D.mark(function t(){var e;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.length)){t.next=8;break}if(this[e]>>6==2){t.next=5;break}return t.next=5,this.toChar(e);case 5:e++,t.next=1;break;case 8:case"end":return t.stop()}},t,this)})},{key:"charAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.toChar(this.getCharStart(t))}},{key:"getCharEnd",value:function(t){var e=this[t];if(e<128)return t;switch((240&e)>>4){case 15:return t+3;case 14:return t+2;case 13:case 12:return t+1;default:return-1}}},{key:"getCharStart",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r<this.length;r++)if(this[r]>>6!=2&&e++,e===t)return r;return-1}},{key:"replace",value:function(t,e){for(var r=0;r<this.length;){var i=this.search(t,r);if(!~i)break;this.set(e,i),r=i+e.length}return this}},{key:"reverse",value:function(){for(var t=0,e=this.length-1;t<e;t++,e--){var r=[this[e],this[t]];this[t]=r[0],this[e]=r[1]}for(var i=this.length;--i>0;)switch((240&this[i])>>4){case 15:var n=[this[i-3],this[i]];this[i]=n[0],this[i-3]=n[1];var s=[this[i-2],this[i-1]];this[i-1]=s[0],this[i-2]=s[1],i-=3;break;case 14:var a=[this[i-2],this[i]];this[i]=a[0],this[i-2]=a[1],i-=2;break;case 12:case 13:var o=[this[i-1],this[i]];this[i]=o[0],this[i-1]=o[1],i--}return this}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.length>256&&t.length<32?this.searchShiftOr(t,e):this.searchNaive(t,e)}},{key:"searchNaive",value:function(t,e){var r=t.length,i=this.length-r;t:for(var n=e;n<=i;n++){for(var s=0;s<r;s++)if(this[n+s]!==t[s])continue t;return n}return-1}},{key:"searchShiftOr",value:function(t,e){var r=this.constructor.masks,i=t.length,n=1<<i;r.fill(-1);for(var s=-2,a=0;a<i;a++)r[t[a]]&=~(1<<a);for(var o=e;o<this.length;o++)if(s|=r[this[o]],0==((s<<=1)&n))return o-i+1;return-1}},{key:"substring",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,r=this.getCharStart(t),i=this.getCharStart(e,t,r),n=this.subarray(r,this.getCharEnd(i)+1);return this.constructor.decoder.decode(n)}},{key:"toChar",value:function(t){var e=this[t];if(e<128)return String.fromCodePoint(e);switch((240&e)>>4){case 15:return String.fromCodePoint((7&e)<<18|(63&this[t+1])<<12|(63&this[t+2])<<6|63&this[t+3]);case 14:return String.fromCodePoint((15&e)<<12|(63&this[t+1])<<6|63&this[t+2]);case 13:case 12:return String.fromCodePoint((31&e)<<6|63&this[t+1]);default:return""}}},{key:"toString",value:function(){var t=this.constructor.decoder.decode(this),e=t.indexOf(it);return~e?t.slice(0,e):t}},{key:"trim",value:function(){var t=this.indexOf(0);return~t?this.subarray(0,t):this}},{key:"size",get:function(){for(var t=0,e=0;e<this.length;e++)this[e]>>6!=2&&t++;return t}}],[{key:"fromString",value:function(t,e){var r=this.encoder.encode(t);if(e){var i=new this(e);return i.set(r),i}return new this(r.buffer)}},{key:"getByteSize",value:function(t){for(var e=0,r=0;r<t.length;r++){var i=t.codePointAt(r);i<128?e+=1:i<2048?e+=2:i<65536?e+=3:(e+=4,r++)}return e}}]),a}(u(Uint8Array));nt.masks=new Int8Array(256).fill(-1),nt.encoder=new TextEncoder,nt.decoder=new TextDecoder;var st=nt,at={Int8:1,Uint8:1,Int16:2,Uint16:2,Int32:4,Uint32:4,Float32:4,Float64:8,BigInt64:8,BigUint64:8,String:0,Int8Array:0,Uint8Array:0,Uint8ClampedArray:0,Int16Array:0,Uint16Array:0,Int32Array:0,Uint32Array:0,Float32Array:0,Float64Array:0,BigInt64Array:0,BigUint64Array:0},ot={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,BigInt64Array:BigInt64Array,BigUint64Array:BigUint64Array},ut=function(t){function o(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,u=arguments.length>2?arguments[2]:void 0,h=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0;r(this,o);var c=t[t.length-1];c.end||(this instanceof o?this.constructor:void 0).initialize(t);var f=c.end,v=Math.ceil(Math.log2(f)),g=u||new ArrayBuffer(i<<v);e=n(this,s(o).call(this,g,h,l));for(var y={},d=0;d<t.length;d++)y[t[d].name]=t[d];return Object.defineProperties(a(e),{fields:{value:t},offset:{value:v},schema:{value:y},byteView:{value:new st(e.buffer,e.byteOffset,e.byteLength)}}),e}return i(o,t),e(o,[{key:"get",value:function(t,e){var r=this.schema[e],i=r.type,n=r.size,s=r.littleEndian,a=this.getByteOffset(t,e);switch(i){case"Int8":return this.getInt8(a);case"Uint8":return this.getUint8(a);case"Int16":return this.getInt16(a,s);case"Uint16":return this.getUint16(a,s);case"Int32":return this.getInt32(a,s);case"Uint32":return this.getUint32(a,s);case"Float32":return this.getFloat32(a,s);case"Float64":return this.getFloat64(a,s);case"BigInt64":return this.getBigInt64(a,s);case"BigUint64":return this.getBigUint64(a,s);case"String":return this.getString(a,n);default:return this.getArray(a,n,i)}}},{key:"getArray",value:function(t,e,r){return new ot[r](this.buffer,this.byteOffset+t,e)}},{key:"getString",value:function(t,e){return this.byteView.subarray(t,t+e)}},{key:"set",value:function(t,e,r){var i=this.schema[e],n=i.type,s=i.littleEndian,a=i.size,o=this.getByteOffset(t,e);switch(n){case"Int8":this.setInt8(o,r);break;case"Uint8":this.setUint8(o,r);break;case"Int16":this.setInt16(o,r,s);break;case"Uint16":this.setUint16(o,r,s);break;case"Int32":this.setInt32(o,r,s);break;case"Uint32":this.setUint32(o,r,s);break;case"Float32":this.setFloat32(o,r,s);break;case"Float64":this.setFloat64(o,r,s);break;case"BigInt64":this.setBigInt64(o,r,s);break;case"BigUint64":this.setBigUint64(o,r,s);break;case"String":this.setString(o,r,a);break;default:this.setArray(o,r,a,n)}return this}},{key:"setArray",value:function(t,e,r,i){var n=new ot[i](this.buffer,this.byteOffset+t,r);return e.length<n.length&&n.fill(0),n.set(e),this}},{key:"setString",value:function(t,e,r){e.length===r?this.byteView.set(e,t):this.byteView.subarray(t,t+r).fill(0).set(e)}},{key:"getByteOffset",value:function(t,e){return(t<<this.offset)+this.schema[e].start}},{key:"toObject",value:function(t){for(var e=this.fields,r={},i=0;i<e.length;i++){var n=e[i].name;r[n]=this.get(t,n)}return r}},{key:"fromObject",value:function(t,e){for(var r=this.fields,i=0;i<r.length;i++){var n=r[i].name;Reflect.has(e,n)&&this.set(t,n,e[n])}return this}},{key:"size",get:function(){return this.buffer.byteLength>>this.offset}}],[{key:"getLength",value:function(t,e){var r=t[t.length-1];return r.end||this.initialize(t),e<<Math.ceil(Math.log2(r.end))}},{key:"initialize",value:function(t){for(var e=0,r=0;r<t.length;r++){var i=t[r],n=i.type,s=i.size;if(!Reflect.has(at,n))throw TypeError('Type "'.concat(n,'" is not a valid type.'));if(Reflect.has(ot,n)){var a=ot[n].BYTES_PER_ELEMENT;e=tt.getGTEMultiple(e,a),s*=a}i.start=e,e+=s||at[n],i.end=e}}}]),o}(u(DataView));var ht=function(t){return function(a){function u(){return r(this,u),n(this,s(u).apply(this,arguments))}return i(u,t),e(u,[{key:"includes",value:function(t){return!!~this.indexOf(t)}},{key:"indexOf",value:function(t){return this.constructor.getIndex(this,t)}},{key:"isSorted",value:function(){return this.constructor.isSorted(this)}},{key:"isUnique",value:function(){return this.constructor.isUnique(this)}},{key:"range",value:function(t,e,r){return this.constructor.getRange(this,t,e,this.constructor.compare,r)}},{key:"rank",value:function(t){return this.constructor.getIndex(this,t,this.constructor.compare,!0)}}],[{key:"compare",value:function(t,e){if(t>e)return 1;if(t<e)return-1;if(t===e)return 0;throw new RangeError("Unstable comparison.")}},{key:"from",value:function(t,e,r){var i=o(s(u),"from",this).call(this,t,e,r);return i.sort(),i}},{key:"getDifference",value:function(t,e,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.compare,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=0,a=0;s<t.length&&a<e.length;){var o=i(t[s],e[a]);o>0?(r&&(n[n.length]=e[a]),a++):o<0?(n[n.length]=t[s],s++):(s++,a++)}for(;s<t.length;)n[n.length]=t[s],s++;if(r)for(;a<e.length;)n[n.length]=e[a],a++;return n}},{key:"getDifferenceScore",value:function(t,e,r,i){var n=this.getIntersectionScore(t,e,i);return r?t.length+e.length-2*n:t.length-n}},{key:"getIndex",value:function(t,e){for(var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.compare,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length-1;s<=a;){var o=i(t[r=s+a>>1],e);if(o<0)s=r+1;else{if(!(o>0))return r;a=r-1}}return n?s:-1}},{key:"getIntersection",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.compare,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=0,s=0;n<t.length&&s<e.length;){var a=r(t[n],e[s]);a>0?s++:a<0?n++:(i[i.length]=t[n],n++,s++)}return i}},{key:"getIntersectionScore",value:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.compare,i=0,n=0,s=0;n<t.length&&s<e.length;){var a=r(t[n],e[s]);a>0?s++:a<0?n++:(i++,n++,s++)}return i}},{key:"getRange",value:function(t,e,r,i,n){var s=void 0===e?0:this.getIndex(t,e,i,!0),a=void 0===r?t.length:this.getIndex(t,r,i,!0,s)+1;return t[n?"subarray":"slice"](s,a)}},{key:"getUnion",value:function(t,e,r){for(var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.compare,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=0,a=0;s<t.length&&a<e.length;){var o=i(t[s],e[a]);o>0?(n[n.length]=e[a],a++):o<0?(n[n.length]=t[s],s++):(n[n.length]=t[s],r||(n[n.length]=e[a]),s++,a++)}for(;s<t.length;)n[n.length]=t[s],s++;for(;a<e.length;)n[n.length]=e[a],a++;return n}},{key:"getUnique",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.compare,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r[0]=t[0];for(var i=1;i<t.length;i++)0!==e(t[i-1],t[i])&&(r[r.length]=t[i]);return r}},{key:"of",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var n=(t=o(s(u),"of",this)).call.apply(t,[this].concat(r));return n.sort(),n}},{key:"isSorted",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.compare,r=1;r<t.length;r++)if(e(t[r-1],t[r])>0)return!1;return!0}},{key:"isUnique",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.compare,r=1;r<t.length;r++)if(0===e(t[r-1],t[r]))return!1;return!0}}]),u}()},lt=function(t){function a(){return r(this,a),n(this,s(a).apply(this,arguments))}return i(a,t),e(a,[{key:"concat",value:function(){for(var t=this,e=0;e<arguments.length;e++)t=this.constructor.getUnion(t,e<0||arguments.length<=e?void 0:arguments[e],this.unique,this.constructor.compare,new this.constructor);return t}},{key:"push",value:function(){for(var t,e,r=this,i=this.constructor.compare,n=this.length,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];if(!n)return(t=o(s(a.prototype),"push",this)).call.apply(t,[this].concat(h(l.sort(i))));var f=this.unique?l.filter(function(t){return!~r.indexOf(t)}):l,v=f.length;if(!v)return n;f.sort(i);for(var g=v-1;g>=0;g--){var y=void 0,d=this[n-1];for(y=n-2;y>=0&&1===i(this[y],f[g]);y--)this[y+1]=this[y];y===n-2&&1!==i(d,f[g])||(this[y+1]=f[g],f[g]=d)}return(e=o(s(a.prototype),"push",this)).call.apply(e,[this].concat(h(f)))}},{key:"set",value:function(t){this.length=t.length;for(var e=0;e<t.length;e++)this[e]=t[e];return this}},{key:"sort",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.compare;return o(s(a.prototype),"sort",this).call(this,t)}},{key:"splice",value:function(t,e){for(var r=o(s(a.prototype),"splice",this).call(this,t,e),i=arguments.length,n=new Array(i>2?i-2:0),u=2;u<i;u++)n[u-2]=arguments[u];return this.push.apply(this,n),r}},{key:"uniquify",value:function(){return this.set(this.constructor.getUnique(this,this.constructor.compare,new this.constructor))}},{key:"unshift",value:function(){return this.push.apply(this,arguments)}}]),a}(ht(Array));var ct=function(t){return function(u){function h(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,h);for(var i,o=e.rows,u=void 0===o?2:o,l=e.pad,c=void 0===l?0:l,f=arguments.length,v=new Array(f>1?f-1:0),g=1;g<f;g++)v[g-1]=arguments[g];return v.length?t=n(this,(i=s(h)).call.apply(i,[this].concat(v))):(t=n(this,s(h).call(this,h.getLength(u)))).fill(c),Object.defineProperties(a(t),{pad:{value:c,writable:!0},columns:{value:u},rows:{value:u},lastCoordinates:{value:Object.seal({row:0,column:0})}}),n(t)}return i(h,t),e(h,[{key:"get",value:function(t,e){return this[this.constructor.getIndex(t,e)]}},{key:"set",value:function(t,e,r){return t.length&&o(s(h.prototype),"set",this)?(o(s(h.prototype),"set",this).call(this,t,e),this):(this[this.constructor.getIndex(t,e)]=r,this)}},{key:"setArray",value:function(t,e){if(o(s(h.prototype),"set",this))o(s(h.prototype),"set",this).call(this,t,e);else{this.length=t.length;for(var r=0;r<t.length;r++)this[r]=t[r]}}},{key:"getCoordinates",value:function(t){var e=Math.sqrt(1+(t<<3))-1>>1;return this.lastCoordinates.row=e,this.lastCoordinates.column=t-(e*(e+1)>>1),this.lastCoordinates}},{key:"toArrays",value:function(){for(var t=this.rows,e=new Array(t).fill(0).map(function(){return[]}),r=0,i=0;i<t;i++)for(var n=0;n<=i;n++)e[i][n]=this[r],e[n][i]=this[r],r++;return e}}],[{key:"getIndex",value:function(t,e){var r=F(t>=e?[e,t]:[t,e],2),i=r[0],n=r[1];return i+((n+1)*n>>1)}},{key:"getLength",value:function(t){return(t+1)*t>>1}},{key:"fromArrays",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.length,i=new this({rows:r,pad:e}),n=0,s=0;s<r;s++)for(var a=0;a<=s;a++)i[n]=t[s][a],n++;return i}},{key:Symbol.species,get:function(){return t}}]),h}()},ft=function(t){function o(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,o);for(var i,u=e.vertices,h=e.edges,l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];c.length?(!u&&c[0].length&&(u=o.getVertexCount(c[0]),h=c[0].length-u-1),t=n(this,(i=s(o)).call.apply(i,[this].concat(c)))):(u=u||2,h=h||2,t=n(this,s(o).call(this,u+h+1)));return Object.defineProperties(a(t),{vertices:{value:u},edges:{value:h}}),c.length||t.setOffsets(),n(t)}return i(o,t),e(o,[{key:"addEdge",value:function(t,e){var r=this.constructor.undirected;if(this.hasEdge(t,e))return this;if(this.isFull())throw new RangeError("The list is full.");return this.setEdge(t,e),r&&this.setEdge(e,t),this}},{key:"removeEdge",value:function(t,e){var r=this.constructor.undirected;return this.unsetEdge(t,e),r&&this.unsetEdge(e,t),this}},{key:"hasEdge",value:function(t,e){return!!this.getEdge(t,e)}},{key:"getEdge",value:function(t,e){var r=this[t],i=this[t+1];if(r===i)return 0;for(var n=r;n<i;n++)if(this[n]===e)return 1;return 0}},{key:"setEdge",value:function(t,e){for(var r=this.vertices,i=this[r];i>this[t];i--){var n=[this[i-1],this[i]];this[i]=n[0],this[i-1]=n[1]}this[this[t]]=e;for(var s=t+1;s<=r;s++)this[s]+=1;return this}},{key:"unsetEdge",value:function(t,e){var r=this[t],i=this[t+1];if(r===i)return this;for(var n=0,s=r;s<i;s++)if(this[s]===e){n=s;break}if(!n)return this;for(var a=n;a<this[this.vertices];a++)this[a]=this[a+1];for(var o=t+1;o<=this.vertices;o++)this[o]-=1;return this}},{key:"outEdges",value:D.mark(function t(e){var r,i,n;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this[e],i=this[e+1],r===i){t.next=10;break}n=i-1;case 4:if(!(n>=r)){t.next=10;break}return t.next=7,this[n];case 7:n--,t.next=4;break;case 10:case"end":return t.stop()}},t,this)})},{key:"inEdges",value:D.mark(function t(e){var r,i,n,s;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.vertices,i=0,n=1,s=r+1;case 4:if(!(s<this[r])){t.next=12;break}for(;s>=this[n];)i++,n++;if(this[s]!==e){t.next=9;break}return t.next=9,i;case 9:s++,t.next=4;break;case 12:case"end":return t.stop()}},t,this)})},{key:"setOffsets",value:function(){for(var t=this.vertices+1,e=0;e<t;e++)this[e]=t}},{key:"isFull",value:function(){return this[this.vertices]>=this.length}},{key:"grow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new this.constructor({vertices:this.vertices+t,edges:this.edges+e});if(t){for(var i=this[this.vertices],n=this.vertices+t,s=i+t,a=0;a<=n;a++)r[a]=a<this.vertices?this[a]+t:s;r.set(this.subarray(this.vertices+1),n+1)}else r.set(this);return r}}],[{key:"getLength",value:function(t,e){return t+e+1}},{key:"getVertexCount",value:function(t){for(var e=0;t[e]<=t[e+1];)e++;return e}},{key:"fromGrid",value:function(t){for(var e=t.rows,r=e+1,i=t.pad||0,n=new Array(r).fill(r),s=0,a=0;a<e;a++){n[a+1]=0===a?r:n[a];for(var o=0;o<e;o++)t.get(a,o)!==i&&(n.push(o),n[a+1]+=1,s++)}var u=new this({vertices:e,edges:s});return u.set(n),u}},{key:Symbol.species,get:function(){return Uint32Array}}]),o}(u(Uint32Array));ft.undirected=!1,ft.weighted=!1;var vt=ft,gt=function(t){function u(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,u);for(var o=i.vertices,h=void 0===o?2:o,l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];return e=n(this,(t=s(u)).call.apply(t,[this,{rows:h,columns:h}].concat(c))),Object.defineProperties(a(e),{vertices:{value:h}}),e}return i(u,W),e(u,[{key:"addEdge",value:function(t,e){var r=this.constructor.undirected;return this.set(t,e),r&&this.set(e,t),this}},{key:"removeEdge",value:function(t,e){var r=this.constructor.undirected;return this.set(t,e,0),r&&this.set(e,t,0),this}},{key:"hasEdge",value:function(t,e){return!!this.get(t,e)}},{key:"getEdge",value:function(t,e){return this.get(t,e)}},{key:"outEdges",value:D.mark(function t(e){var r,i,n,s,a,o,u;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.columns,i=this.offset,s=(n=e<<i)+r,a=n;case 4:if(!(a<s)){t.next=14;break}if(u=a-((o=a>>4)<<4),!(this[o]>>u&1)){t.next=11;break}return t.next=11,a-n;case 11:a++,t.next=4;break;case 14:case"end":return t.stop()}},t,this)})},{key:"inEdges",value:D.mark(function t(e){var r,i,n,s,a,o;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.rows,i=this.offset,n=0;case 2:if(!(n<r)){t.next=13;break}if(o=(s=(n<<i)+e)-((a=s>>4)<<4),!(this[a]>>o&1)){t.next=10;break}return t.next=10,n;case 10:n++,t.next=2;break;case 13:case"end":return t.stop()}},t,this)})}],[{key:"getLength",value:function(t){return o(s(u),"getLength",this).call(this,t,t)}},{key:"fromList",value:function(t){for(var e=t.vertices,r=new this({vertices:e}),i=0;i<e;i++){var n=t[i],s=t[i+1];if(n!==s)for(var a=s-1;a>=n;a--)r.addEdge(i,t[a])}return r}}]),u}();gt.undirected=!1,gt.weighted=!1;var yt=gt;var dt=function(t){var o=function(o){function u(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,u);for(var i,o=e.vertices,h=e.edges,l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];return c.length?(!o&&c[0].length&&(o=u.getVertexCount(c[0]),h=c[0].length-o-1),t=n(this,(i=s(u)).call.apply(i,[this].concat(c)))):(o=o||2,h=h||4,t=n(this,s(u).call(this,o+(h<<1)+1))),Object.defineProperties(a(t),{vertices:{value:o},edges:{value:h}}),c.length||t.setOffsets(),n(t)}return i(u,t),e(u,[{key:"addEdge",value:function(t,e,r){var i=this.constructor.undirected;if(this.hasEdge(t,e))return this;if(this.isFull())throw new RangeError("The list is full.");return this.setEdge(t,e,r),i&&this.setEdge(e,t,r),this}},{key:"removeEdge",value:function(t,e){var r=this.constructor.undirected;return this.unsetEdge(t,e),r&&this.unsetEdge(e,t),this}},{key:"hasEdge",value:function(t,e){return!Number.isNaN(this.getEdge(t,e))}},{key:"getEdge",value:function(t,e){var r=this[t],i=this[t+1];if(r===i)return NaN;for(var n=r;n<i;n+=2)if(this[n]===e)return this[n+1];return NaN}},{key:"setEdge",value:function(t,e,r){for(var i=this.vertices,n=this[i];n>this[t];n-=2){var s=[this[n-2],this[n-1],this[n],this[n+1]];this[n]=s[0],this[n+1]=s[1],this[n-1]=s[2],this[n-2]=s[3]}this[this[t]]=e,this[this[t]+1]=r;for(var a=t+1;a<=i;a++)this[a]+=2;return this}},{key:"unsetEdge",value:function(t,e){var r=this[t],i=this[t+1];if(r===i)return this;for(var n=0,s=r;s<i;s+=2)if(this[s]===e){n=s;break}if(!n)return this;for(var a=n;a<this[this.vertices];a+=2)this[a]=this[a+2],this[a+1]=this[a+3];for(var o=t+1;o<=this.vertices;o++)this[o]-=2;return this}},{key:"outEdges",value:D.mark(function t(e){var r,i,n;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this[e],i=this[e+1],r===i){t.next=10;break}n=i-2;case 4:if(!(n>=r)){t.next=10;break}return t.next=7,this[n];case 7:n-=2,t.next=4;break;case 10:case"end":return t.stop()}},t,this)})},{key:"inEdges",value:D.mark(function t(e){var r,i,n,s;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.vertices,i=0,n=1,s=r+1;case 4:if(!(s<this[r])){t.next=12;break}for(;s>=this[n];)i++,n++;if(this[s]!==e){t.next=9;break}return t.next=9,i;case 9:s+=2,t.next=4;break;case 12:case"end":return t.stop()}},t,this)})},{key:"setOffsets",value:function(){for(var t=this.vertices+1,e=0;e<t;e++)this[e]=t}},{key:"isFull",value:function(){return this[this.vertices]>=this.length}},{key:"grow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new this.constructor({vertices:this.vertices+t,edges:this.edges+e});if(t){for(var i=this[this.vertices],n=this.vertices+t,s=i+t,a=0;a<=n;a++)r[a]=a<this.vertices?this[a]+t:s;r.set(this.subarray(this.vertices+1),n+1)}else r.set(this);return r}}],[{key:"getLength",value:function(t,e){return t+(e<<1)+1}},{key:"getVertexCount",value:function(t){for(var e=0;t[e]<=t[e+1];)e++;return e}},{key:"fromGrid",value:function(t){for(var e=t.rows,r=e+1,i=t.pad||0,n=new Array(r).fill(r),s=0,a=0;a<e;a++){n[a+1]=0===a?r:n[a];for(var o=0;o<e;o++){var u=t.get(a,o);u!==i&&(n.push(o,u),n[a+1]+=2,s++)}}var h=new this({vertices:e,edges:s});return h.set(n),h}},{key:Symbol.species,get:function(){return t}}]),u}();return o.undirected=!1,o.weighted=!0,o};var pt=function(t){var u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],h=u?ct(t):Y(t),l=function(t){function u(){var t,e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,u);for(var o=i.vertices,h=void 0===o?2:o,l=i.pad,c=void 0===l?0:l,f=arguments.length,v=new Array(f>1?f-1:0),g=1;g<f;g++)v[g-1]=arguments[g];return e=n(this,(t=s(u)).call.apply(t,[this,{rows:h,columns:h,pad:c}].concat(v))),Object.defineProperties(a(e),{vertices:{value:h}}),e}return i(u,h),e(u,[{key:"addEdge",value:function(t,e,r){return this.set(t,e,r),this}},{key:"removeEdge",value:function(t,e){return this.set(t,e,this.pad),this}},{key:"hasEdge",value:function(t,e){return this.get(t,e)!==this.pad}},{key:"getEdge",value:function(t,e){return this.get(t,e)}},{key:"outEdges",value:D.mark(function t(e){var r,i;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.vertices,i=0;case 2:if(!(i<r)){t.next=9;break}if(!this.hasEdge(e,i)){t.next=6;break}return t.next=6,i;case 6:i++,t.next=2;break;case 9:case"end":return t.stop()}},t,this)})},{key:"inEdges",value:D.mark(function t(e){var r,i;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=this.vertices,i=0;case 2:if(!(i<r)){t.next=9;break}if(!this.hasEdge(i,e)){t.next=6;break}return t.next=6,i;case 6:i++,t.next=2;break;case 9:case"end":return t.stop()}},t,this)})}],[{key:"getLength",value:function(t){return o(s(u),"getLength",this).call(this,t,t)}},{key:"fromList",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.vertices,i=new this({vertices:r,pad:e}),n=0;n<r;n++){var s=t[n],a=t[n+1];if(s!==a)for(var o=a-2;o>=s;o-=2)i.addEdge(n,t[o],t[o+1])}return i}}]),u}();return l.undirected=u,l.weighted=!0,l};var kt=function(t){return t.isInitialized||t.initialize(),function(a){function o(){return r(this,o),n(this,s(o).apply(this,arguments))}return i(o,t),e(o,[{key:"get",value:function(e){var r=this.constructor.objectLength;return new t(this.buffer,this.byteOffset+e*r,r)}},{key:"set",value:function(t,e){return this.setObject(t*this.constructor.objectLength,e,this.constructor),this}},{key:"setView",value:function(t,e){var r=this.constructor.objectLength;return new Uint8Array(this.buffer,this.byteOffset+t*r,r).set(new Uint8Array(e.buffer,e.byteOffset,e.length)),this}},{key:Symbol.iterator,value:D.mark(function t(){var e,r;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.size,r=0;case 2:if(!(r<e)){t.next=8;break}return t.next=5,this.get(r);case 5:r++,t.next=2;break;case 8:case"end":return t.stop()}},t,this)})},{key:"toObject",value:function(){return this.getArray(0,this.constructor,this.size)}},{key:"size",get:function(){return this.byteLength/this.constructor.objectLength}}],[{key:"from",value:function(t,e){for(var r=e||this.of(t.length),i=r.size,n=0;n<i;n++)r.set(n,t[n]);return r}},{key:"getLength",value:function(t){return t*this.objectLength}},{key:"of",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new this(new ArrayBuffer(this.getLength(t)))}}]),o}()},mt={int8:"getInt8",uint8:"getUint8",int16:"getInt16",uint16:"getUint16",int32:"getInt32",uint32:"getUint32",float32:"getFloat32",float64:"getFloat64",bigint64:"getBigInt64",biguint64:"getBigUint64"},bt={int8:"setInt8",uint8:"setUint8",int16:"setInt16",uint16:"setUint16",int32:"setInt32",uint32:"setUint32",float32:"setFloat32",float64:"setFloat64",bigint64:"setBigInt64",biguint64:"setBigUint64"},wt={int8:0,uint8:0,int16:1,uint16:1,int32:2,uint32:2,float32:2,float64:3,bigint64:3,biguint64:3};var xt=function(t,a){var o=function(t){function a(){return r(this,a),n(this,s(a).apply(this,arguments))}return i(a,t),e(a,[{key:"get",value:function(t){var e=this.constructor,r=e.typeGetter,i=e.offset,n=e.littleEndian;return this[r](t<<i,n)}},{key:"set",value:function(t,e){var r=this.constructor,i=r.typeSetter,n=r.offset,s=r.littleEndian;return this[i](t<<n,e,s),this}},{key:Symbol.iterator,value:D.mark(function t(){var e,r;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.size,r=0;case 2:if(!(r<e)){t.next=8;break}return t.next=5,this.get(r);case 5:r++,t.next=2;break;case 8:case"end":return t.stop()}},t,this)})},{key:"toObject",value:function(){return h(this)}},{key:"size",get:function(){return this.byteLength>>this.constructor.offset}}],[{key:"getLength",value:function(t){return t<<this.offset}},{key:"from",value:function(t,e){for(var r=e||this.of(t.length),i=r.size,n=0;n<i;n++)r.set(n,t[n]);return r}},{key:"of",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new this(new ArrayBuffer(this.getLength(t)))}}]),a}(u(DataView));return o.typeGetter=mt[t],o.typeSetter=bt[t],o.offset=wt[t],o.littleEndian=!!a,o},At={int8:1,uint8:1,int16:2,uint16:2,int32:4,uint32:4,float32:4,float64:8,bigint64:8,biguint64:8,string:0},It=function(t){function a(){return r(this,a),n(this,s(a).apply(this,arguments))}return i(a,t),e(a,[{key:"get",value:function(t){var e=this.constructor.schema[t],r=e.type,i=e.littleEndian,n=e.start,s=e.ctor,a=e.length;switch(r){case"int8":return this.getInt8(n);case"uint8":return this.getUint8(n);case"int16":return this.getInt16(n,i);case"uint16":return this.getUint16(n,i);case"int32":return this.getInt32(n,i);case"uint32":return this.getUint32(n,i);case"float32":return this.getFloat32(n,i);case"float64":return this.getFloat64(n,i);case"bigint64":return this.getBigInt64(n,i);case"biguint64":return this.getBigUint64(n,i);default:return this.getView(n,a,s)}}},{key:"getArray",value:function(t,e,r){for(var i=e.schema,n=e.objectLength,s=new Array(r),a=0;a<r;a++)s[a]=this.getObject(i,t+a*n);return s}},{key:"getTypedArray",value:function(t,e,r){for(var i=e.typeGetter,n=e.offset,s=e.littleEndian,a=new Array(r),o=0;o<r;o++)a[o]=this[i](t+(o<<n),s);return a}},{key:"getObject",value:function(t,e){for(var r=Object.keys(t),i={},n=0;n<r.length;n++){var s=r[n],a=t[s],o=a.type,u=a.littleEndian,h=a.start,l=a.ctor,c=a.length,f=a.size,v=void 0,g=e+h;switch(o){case"int8":v=this.getInt8(g);break;case"uint8":v=this.getUint8(g);break;case"int16":v=this.getInt16(g,u);break;case"uint16":v=this.getUint16(g,u);break;case"int32":v=this.getInt32(g,u);break;case"uint32":v=this.getUint32(g,u);break;case"float32":v=this.getFloat32(g,u);break;case"float64":v=this.getFloat64(g,u);break;case"bigint64":v=this.getBigInt64(g,u);break;case"biguint64":v=this.getBigUint64(g,u);break;case"string":v=new st(this.buffer,this.byteOffset+g,c).toString();break;case"typedarray":v=this.getTypedArray(g,l,f);break;case"array":v=this.getArray(g,l,f);break;default:v=this.getObject(l.schema,g)}i[s]=v}return i}},{key:"getView",value:function(t,e){return new(arguments.length>2&&void 0!==arguments[2]?arguments[2]:st)(this.buffer,this.byteOffset+t,e)}},{key:"set",value:function(t,e){return this.setValue(t,e)}},{key:"setArray",value:function(t,e,r,i){for(var n=r.fields,s=r.schema,a=i<e.length?i:e.length,o=0;o<a;o++)for(var u=0;u<n.length;u++){var h=n[u];this.setValue(h,e[o][h],s,t+o*r.objectLength)}}},{key:"setObject",value:function(t,e,r){for(var i=r.fields,n=r.schema,s=0;s<i.length;s++){var a=i[s];Reflect.has(e,a)&&this.setValue(a,e[a],n,t)}}},{key:"setString",value:function(t,e,r){new Uint8Array(this.buffer,this.byteOffset+t,r).fill(0).set(st.fromString(e))}},{key:"setTypedArray",value:function(t,e,r,i){for(var n=r.typeSetter,s=r.offset,a=r.littleEndian,o=i<e.length?i:e.length,u=0;u<o;u++)this[n](t+(u<<s),e[u],a)}},{key:"setValue",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.schema,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=r[t],s=n.type,a=n.littleEndian,o=n.start,u=n.ctor,h=n.length,l=n.size,c=i+o;switch(s){case"int8":this.setInt8(c,e);break;case"uint8":this.setUint8(c,e);break;case"int16":this.setInt16(c,e,a);break;case"uint16":this.setUint16(c,e,a);break;case"int32":this.setInt32(c,e,a);break;case"uint32":this.setUint32(c,e,a);break;case"float32":this.setFloat32(c,e,a);break;case"float64":this.setFloat64(c,e,a);break;case"bigint64":this.setBigInt64(c,e,a);break;case"biguint64":this.setBigUint64(c,e,a);break;case"string":this.setString(c,e,h);break;case"typedarray":this.setTypedArray(c,e,u,l);break;case"array":this.setArray(c,e,u,l);break;default:this.setObject(c,e,u)}return this}},{key:"setView",value:function(t,e){var r=this.constructor.schema[t].start;return new Uint8Array(this.buffer,this.byteOffset,this.byteLength).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r),this}},{key:"toObject",value:function(){return this.getObject(this.constructor.schema,0)}}],[{key:"from",value:function(t,e){var r=e||new this(new ArrayBuffer(this.getLength()));return r.setObject(0,t,r.constructor),r}},{key:"getLength",value:function(){return this.isInitialized||this.initialize(),this.objectLength}},{key:"initialize",value:function(){for(var t=this.schema,e=Object.keys(t),r=0,i=0;i<e.length;i++){var n=t[e[i]],s=n.type,a=n.size,o=n.littleEndian,u=0,h="string"==typeof s,l=h&&!!a,c=!l&&!!a;if(h&&!Reflect.has(At,s))throw TypeError('Type "'.concat(s,'" is not a valid type.'));l?(n.ctor=xt(s,o),n.type="typedarray",u=n.ctor.getLength(a)):c?(n.ctor=kt(s),n.type="array",u=n.ctor.getLength(a)):h||(n.type="object",n.ctor=s,u=s.getLength()),n.start=r,n.length=n.length||u||At[s],r+=n.length}this.objectLength=r,this.fields=e,this.isInitialized=!0}}]),a}(u(DataView));It.fields=void 0,It.schema=void 0,It.objectLength=0,It.isInitialized=!1;var Et={BitField:K,GraphMixin:Q,GridMixin:Y,BinaryHeap:H,Pool:et,RankedBitArray:rt,RecordArray:ut,SortedArray:lt,SortedMixin:ht,SymmetricGridMixin:ct,UnweightedAdjacencyList:vt,UnweightedAdjacencyMatrix:yt,WeightedAdjacencyListMixin:dt,WeightedAdjacencyMatrixMixin:pt,ArrayViewMixin:kt,ObjectView:It,StringView:st,TypedArrayViewMixin:xt}.GridMixin,Ut=l.Map,Ot=l.Object;function St(t,e,r){var i=Ot.create(t);return i.tile=e[r],i}function Ct(t){var e,r,i,n;return{c:function(){e=g("div"),r=g("p"),i=C("No mapGrid provided!"),n=y(),this.h()},l:function(t){e=d(t,"DIV",{class:!0},!1);var s=p(e);r=d(s,"P",{class:!0},!1);var a=p(r);i=k(a,"No mapGrid provided!"),a.forEach(m),n=k(s,"\n  "),s.forEach(m),this.h()},h:function(){b(r,"class","flex-item svelte-tcq59r"),b(e,"class","flex-container svelte-tcq59r")},m:function(t,s){x(t,e,s),A(e,r),A(r,i),A(e,n)},d:function(t){t&&m(e)}}}function Bt(t){var e;return{c:function(){e=g("img"),this.h()},l:function(t){e=d(t,"IMG",{src:!0,style:!0,alt:!0,class:!0},!1),p(e).forEach(m),this.h()},h:function(){b(e,"src",t.tile.image),b(e,"style",t.extraStylesFor(t.tile)),b(e,"alt",t.tile.key),b(e,"class","id-"+t.tile.id+" tile-index-"+t.tile.index+" row-"+t.tile.position.row+" column-"+t.tile.position.column+" svelte-tcq59r")},m:function(t,r){x(t,e,r)},p:B,d:function(t){t&&m(e)}}}function Tt(t){var e,r;return{c:function(){e=g("img"),this.h()},l:function(t){e=d(t,"IMG",{src:!0,style:!0,alt:!0,id:!0,class:!0},!1),p(e).forEach(m),this.h()},h:function(){b(e,"src",r=t.player.image),b(e,"style",t.extraStylesFor(t.tile)),b(e,"alt",t.tile.key),b(e,"id","player"),b(e,"class","id-"+t.tile.id+" tile-index-"+t.tile.index+" row-"+t.tile.position.row+" column-"+t.tile.position.column+" svelte-tcq59r")},m:function(t,r){x(t,e,r)},p:function(t,i){t.player&&r!==(r=i.player.image)&&b(e,"src",r)},d:function(t){t&&m(e)}}}function Pt(t,e){var r,i,n,s,a=B;function o(t){return t.tile.image&&t.tile.key===t.player.key?Tt:t.tile.image?Bt:void 0}var u=o(e),h=u&&u(e);return{key:t,first:null,c:function(){r=g("div"),h&&h.c(),i=y(),this.h()},l:function(t){r=d(t,"DIV",{class:!0},!1);var e=p(r);h&&h.l(e),i=k(e,"\n"),e.forEach(m),this.h()},h:function(){b(r,"class","flex-item "+e.extraClassesFor(e.tile)+" svelte-tcq59r"),s=[w(r,"animationstart",e.animations.starting(e.tile)),w(r,"animationend",e.animations.ending(e.tile)),w(r,"animationcancel",e.animations.canceled(e.tile))],this.first=r},m:function(t,e){x(t,r,e),h&&h.m(r,null),A(r,i)},p:function(t,n){u===(u=o(e=n))&&h?h.p(t,e):(h&&h.d(1),(h=u&&u(e))&&(h.c(),h.m(r,i)))},r:function(){n=r.getBoundingClientRect()},f:function(){I(r),a()},a:function(){a(),a=E(r,n,zt,{duration:150,easing:R})},d:function(t){t&&m(r),h&&h.d(),U(s)}}}function Lt(t){for(var e,r,i,n,s=[],a=new Ut,o="Moves: ".concat(t.player.moves),u=t.tileArray,h=function(t){return t.tile.id},l=0;l<u.length;l+=1){var c=St(t,u,l),f=h(c);a.set(f,s[l]=Pt(f,c))}var v=null;return u.length||(v=Ct()).c(),{c:function(){for(e=g("figure"),r=g("div"),l=0;l<s.length;l+=1)s[l].c();i=y(),n=g("figcaption"),this.h()},l:function(t){e=d(t,"FIGURE",{id:!0,style:!0,class:!0},!1);var a=p(e);r=d(a,"DIV",{id:!0,class:!0},!1);var o=p(r);for(l=0;l<s.length;l+=1)s[l].l(o);o.forEach(m),i=k(a,"\n"),n=d(a,"FIGCAPTION",{class:!0},!1),p(n).forEach(m),a.forEach(m),this.h()},h:function(){b(r,"id","gameView"),b(r,"class","flex-container svelte-tcq59r"),b(n,"class","text-center mx-auto svelte-tcq59r"),b(e,"id","sokoban"),O(e,"--columns",t.columns),O(e,"--rows",t.rowIndex),O(e,"--ratio","calc(var(--columns) / var(--rows))"),O(e,"--width","calc(100vmin - 0em)"),O(e,"--tile-width","calc(var(--width) / var(--columns))"),O(e,"--goal-background","url(/"+t.tileTypeDict[t.goal.key].image+")"),O(e,"--floor-background","url(/"+t.tileTypeDict[t.blank.key].image+")"),b(e,"class","svelte-tcq59r")},m:function(t,a){for(x(t,e,a),A(e,r),l=0;l<s.length;l+=1)s[l].m(r,null);v&&v.m(r,null),A(e,i),A(e,n),n.innerHTML=o},p:function(t,i){for(var u=i.tileArray,l=0;l<s.length;l+=1)s[l].r();s=S(s,t,h,1,i,u,a,r,P,Pt,null,St);for(var c=0;c<s.length;c+=1)s[c].a();u.length?v&&(v.d(1),v=null):v||((v=Ct()).c(),v.m(r,null)),t.player&&o!==(o="Moves: ".concat(i.player.moves))&&(n.innerHTML=o),t.columns&&O(e,"--columns",i.columns),t.rowIndex&&O(e,"--rows",i.rowIndex),(t.tileTypeDict||t.goal)&&O(e,"--goal-background","url(/"+i.tileTypeDict[i.goal.key].image+")"),(t.tileTypeDict||t.blank)&&O(e,"--floor-background","url(/"+i.tileTypeDict[i.blank.key].image+")")},i:B,o:B,d:function(t){for(t&&m(e),l=0;l<s.length;l+=1)s[l].d();v&&v.d()}}}var jt="sokoban/images/";function Mt(t){var e=Math.max(Math.floor(Math.random()*Math.floor({C:6,W:4," ":3,P:5}[t])),{C:2,W:1," ":1,P:0}[t]);return"P"===t?e:("0"+e).slice(-2)}function zt(t,e,r){var i=e.from,n=e.to,s=i.left-n.left,a=i.top-n.top,o=Math.sqrt(s*s+a*a),u=Math.abs(a)>14?0:s<0?360:-360;return{delay:0,duration:120*Math.sqrt(o),easing:r.easing||R,css:function(t,e){return"transform: translate(".concat(e*s,"px, ").concat(e*a,"px) rotate(").concat(t*u,"deg);")}}}function Gt(t,e,r){var i=e.mapGrid,n=e.level,s={left:{row:0,column:-1,str:"left"},down:{row:1,column:0,str:"down"},right:{row:0,column:1,str:"right"},up:{row:-1,column:0,str:"up"}},a={key:"C",imagePrefix:"Crates/crate_",imageIndex:Mt("C"),imageSuffix:".png"},o={key:"W",imagePrefix:"Blocks/block_",imageIndex:Mt("W"),imageSuffix:".png"},u={key:" ",imagePrefix:"Ground/ground_",imageIndex:Mt(" "),imageSuffix:".png"},h={key:"G",imagePrefix:"Ground/ground_",imageIndex:u.imageIndex,imageSuffix:"_goal.png"},l={key:"P",get imagePrefix(){return"Player/"+this.direction.str+"/"},imageIndex:0,maxImageIndex:5,imageSuffix:".png",get image(){return jt+this.imagePrefix+this.moves%this.maxImageIndex+this.imageSuffix},moves:0,position:{row:0,column:0},direction:s.down,standingOn:u},c={};c.C=a,r("tileTypeDict",c),c.G=h,r("tileTypeDict",c),c.W=o,r("tileTypeDict",c),c[" "]=u,r("tileTypeDict",c),Object.values(c).forEach(function(t){t.image=jt+t.imagePrefix+t.imageIndex+t.imageSuffix}),c.P=l,r("tileTypeDict",c);var f=[],v=[],g=0,y=0,d=0;i.forEach(function(t){var e=[],i=0;t.forEach(function(t){var n="B"===t?"C":t,s="PC".includes(n)?{key:n,initialLocationIndex:d,initialPos:{row:g,column:i}}:null,a={gridLocation:d,initialKey:"PC".includes(n)?u.key:n,entity:s,moveEntityTo:function(t){t.entity&&alert("Warning! Entity of ".concat(t," replaced by entity of ").concat(this,".")),t.entity=this.entity,this.entity=null,this.key===l.key&&(l.tile=this,r("player",l))},get id(){return this.entity?this.entity.initialLocationIndex:-this.gridLocation},get key(){return this.entity?this.entity.key:this.initialKey},floorKey:u.key,index:d,position:{row:g,column:i},get image(){return this.isTraversable?"":c[this.key].image},get backgroundImage(){return this.isTraversable?c[this.key].image:c[this.floorKey].image},get isTraversable(){return" "===this.key||"G"===this.key},get hasCrate(){return"C"===this.key&&"G"===this.floorKey}};n===l.key&&(l.position=a.position,r("player",l),l.standingOn=a,r("player",l)),"G"===n&&(a.floorKey="G",f.push(a)),e.push(a),d++,i++,r("columns",y=Math.max(i,y))}),r("rowIndex",++g),v.push(e)});var p=Et(Array).fromArrays(v),k=v.flat();var m=function(){x=!0};function b(t){if(x){if(l.direction!=t)return l.direction=t,r("player",l),l.moves++,void r("player",l);var e=(n=t,s=l.position,(o={fromCoordinates:s,relativeCoordinates:n}).targetCoordinates={row:s.row+n.row,column:s.column+n.column},o.beyondTargetCoordinates={row:o.targetCoordinates.row+n.row,column:o.targetCoordinates.column+n.column},o.targetCoordinates.row<0||o.targetCoordinates.column<0?q({canMove:!1},o):o.targetCoordinates.row>p.rows||o.targetCoordinates.column>p.columns?q({canMove:!1},o):(o.targetTile=p.get(o.targetCoordinates.row,o.targetCoordinates.column),o.beyondTargetTile=p.get(o.beyondTargetCoordinates.row,o.beyondTargetCoordinates.column),o.targetTile.isTraversable?q({canMove:!0},o):o.targetTile.key===a.key&&o.beyondTargetTile.isTraversable?q({canMove:!0},o):q({canMove:!1},o)));if(e.canMove){l.moves++,r("player",l),x=!1;setTimeout(m,250);if(e.targetTile.key===a.key){var i=e.beyondTargetTile.key===h.key;e.targetTile.moveEntityTo(e.beyondTargetTile),i&&(r("goalTiles",f),console.log(f))}l.standingOn.moveEntityTo(e.targetTile),l.standingOn=e.targetTile,r("player",l),l.position=e.targetCoordinates,r("player",l)}else{x=!1;setTimeout(m,250);console.log("Can't go in that direction!")}r("player",l)}else console.log("Busy with animation!");var n,s,o}var w=!1,x=!0,A=[],I=function(t){for(var e=0;e<A.length;e++){var r=A[e],i=r.location,n=r.overlay;n.style.setProperty("--offset-left",i.offsetLeft+"px"),n.style.setProperty("--offset-top",i.offsetTop+"px")}};T(V(D.mark(function t(){var e,r,i,n,a,o;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e=document.createElement("div"),(r=document.createElement("img")).src=c[h.key].image,e.appendChild(r),e.classList.add("background-subarea"),i=document.getElementsByClassName("goal"),n=0;n<i.length;n++)a=i[n],o=e,n<i.length-1&&(o=e.cloneNode(!0)),o.style.setProperty("--offset-left",a.offsetLeft+"px"),o.style.setProperty("--offset-top",a.offsetTop+"px"),a.parentElement.insertBefore(o,a),o.style.setProperty("left","var(--offset-left)"),o.style.setProperty("top","var(--offset-top)"),A.push({location:a,overlay:o});return window.onresize=I,t.next=10,import("./hotkeys.esm.c43b16a3.js");case 10:t.sent,N("left, right, up, down","ready",function(t,e){switch(e.key){case"left":b(s.left);break;case"up":b(s.up);break;case"right":b(s.right);break;case"down":b(s.down)}return!1}),N.setScope("ready");case 13:case"end":return t.stop()}},t)})));var E,U,O=(E=new Map,{starting:function(t){E.set(t.id,!0),w=t.key===l.key||w},ending:function(t){E.delete(t.id),t.key===l.key&&(w||console.log("Player animation ended but we thought that they were already done with the animation."),w=!1)},canceled:function(t){E.set(t.id,!1),t.key===l.key&&(w||console.log("Player animation canceled but we thought that they were already done with the animation."),w=!1)}});return t.$set=function(t){"mapGrid"in t&&r("mapGrid",i=t.mapGrid),"level"in t&&r("level",n=t.level)},t.$$.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{goalTiles:1,levelComplete:1};t.goalTiles&&r("levelComplete",U=f.every(function(t){return t.hasCrate})),t.levelComplete&&U&&(alert("Level Complete!"),console.log("Level Complete!"))},{mapGrid:i,level:n,blank:u,goal:h,player:l,tileTypeDict:c,rowIndex:g,columns:y,tileArray:k,extraClassesFor:function(t){return f.some(function(e){return e.position.row===t.position.row&&e.position.column===t.position.column})?"goal":""},extraStylesFor:function(t){return t.floorKey===h.key&&(t.key,l.key),""},animations:O}}var Ft=function(t){function e(t){var i;return r(this,e),i=n(this,s(e).call(this)),c(a(i),t,Gt,Lt,f,["mapGrid","level"]),i}return i(e,v),e}();function Dt(t){var e,r,i,n,s;return{c:function(){e=g("div"),r=g("a"),i=g("button"),n=C("Next Level"),this.h()},l:function(t){e=d(t,"DIV",{class:!0},!1);var s=p(e);r=d(s,"A",{rel:!0,href:!0},!1);var a=p(r);i=d(a,"BUTTON",{class:!0},!1);var o=p(i);n=k(o,"Next Level"),o.forEach(m),a.forEach(m),s.forEach(m),this.h()},h:function(){b(i,"class","p-2 button"),b(r,"rel","prefetch"),b(r,"href",s="levels/"+t.level.next),b(e,"class","footer my-5 mx-auto svelte-3cscbz")},m:function(t,s){x(t,e,s),A(e,r),A(r,i),A(i,n)},p:function(t,e){t.level&&s!==(s="levels/"+e.level.next)&&b(r,"href",s)},d:function(t){t&&m(e)}}}function Vt(t){var e,r,i,n,s=new Ft({props:{level:t.level,mapGrid:t.mapGrid}}),a=null!=t.level.next&&Dt(t);return{c:function(){e=y(),r=g("div"),s.$$.fragment.c(),i=y(),a&&a.c(),this.h()},l:function(t){e=k(t,"\n\n"),r=d(t,"DIV",{class:!0},!1);var n=p(r);s.$$.fragment.l(n),i=k(n,"\n\t"),a&&a.l(n),n.forEach(m),this.h()},h:function(){b(r,"class","game_container mx-auto svelte-3cscbz")},m:function(t,o){x(t,e,o),x(t,r,o),L(s,r,null),A(r,i),a&&a.m(r,null),n=!0},p:function(t,e){var i={};t.level&&(i.level=e.level),t.mapGrid&&(i.mapGrid=e.mapGrid),s.$set(i),null!=e.level.next?a?a.p(t,e):((a=Dt(e)).c(),a.m(r,null)):a&&(a.d(1),a=null)},i:function(t){n||(j(s.$$.fragment,t),n=!0)},o:function(t){M(s.$$.fragment,t),n=!1},d:function(t){t&&(m(e),m(r)),z(s),a&&a.d()}}}function Nt(t){return qt.apply(this,arguments)}function qt(){return(qt=V(D.mark(function t(e){var r,i,n;return D.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.params,e.query,t.next=3,this.fetch("levels/".concat(r.slug,".json"));case 3:return i=t.sent,t.next=6,i.json();case 6:if(n=t.sent,200!==i.status){t.next=11;break}return t.abrupt("return",{level:n});case 11:this.error(i.status,n.message);case 12:case"end":return t.stop()}},t,this)}))).apply(this,arguments)}function Rt(t,e,r){var i=e.level,n=i.mapGrid;return t.$set=function(t){"level"in t&&r("level",i=t.level)},{level:i,mapGrid:n}}export default(function(t){function e(t){var i;return r(this,e),i=n(this,s(e).call(this)),c(a(i),t,Rt,Vt,f,["level"]),i}return i(e,v),e}());export{Nt as preload};
//# sourceMappingURL=[slug].ac212321.js.map
